=== SimpleFlashCards.txt ===
PROJECT: LPH Spanish Learning
COMPONENT: Simple Flashcards - Interactive Spanish vocabulary practice
CREATED: 2025-11-23
LAST UPDATED: 2025-11-23 - Added three learning modes with typing game and updated controls

DATA SOURCES:
- Module: https://some-dude-999.github.io/LPH/SpanishWords/Jsmodules/act1-foundation.js
  Provides wordpacks with Spanish vocabulary and translations (english, chinese, portuguese)
- LocalStorage: Saves user preferences (voice selection, speech speed)
- Web Speech API: Text-to-speech and speech recognition for pronunciation

FUNCTIONALITY:
- Main Purpose: Spanish vocabulary flashcard practice with three interactive learning modes
- Learning Modes:
  * üìñ Reading Mode - Traditional flashcards (Spanish on front, English on back)
  * üëÇ Listening Mode - Hearing practice (hear Spanish, type it, back shows Spanish | English, auto-pronounces)
  * ‚úèÔ∏è Writing Mode - Translation practice (English on front, type Spanish, back shows correct Spanish, auto-pronounces)

- Key Functions:
  * loadWordpacks() - Dynamically imports vocabulary modules
  * initializeDeck(packKey) - Creates shuffled deck from selected wordpack
  * updateDisplay() - Renders current card based on active mode (or starting card)
  * renderStartingCard() - Displays menu/help card (menu on front, help on back)
  * showStartingCard(showBack) - Navigate to starting card (menu/help)
  * exitStartingCard() - Return to saved card position from starting card
  * switchMode(mode) - Changes between reading/listening/writing modes
  * initializeTypingDisplay() - Creates underscore display for typing modes, resets wrong attempts
  * handleTypingInput(key) - Processes typed letters in listening/writing modes (case/accent insensitive, tracks wrong attempts)
  * addDuplicateCards(count) - Adds duplicate cards for wrong answers (auto-practice penalty)
  * normalizeChar(char) - Removes accents and lowercases for matching (√°‚Üía, √©‚Üíe)
  * playKeyboardSound() - Mechanical keyboard click sound for each correct letter
  * removeCurrentCard() - Removes mastered card from deck
  * addConfusedCards() - Adds 2 copies of difficult card
  * speakSpanish() - Text-to-speech pronunciation
  * startListening() - Speech recognition for pronunciation practice
  * calculateSimilarity() - Levenshtein distance for pronunciation scoring

- Event Handlers:
  * Mode buttons (top left) - Switch between reading/listening/writing modes
  * Menu button (‚ò∞) - Show starting card with settings (front side)
  * Help button (?) - Show starting card with quick help (back side)
  * Card flip - Click card or down arrow
  * Navigation - Left/right arrows
  * Pronunciation - Up arrow (always) or Space (reading mode only)
  * Typing - Letter keys in listening/writing modes (case/accent insensitive)
  * Enter - Advance to next card when complete (listening/writing modes)
  * Got it (üëå) - Remove current card from deck (green stamp)
  * Confused (üòï) - Add 2 extra practice copies (red stamp)
  * Sound (üîä) - Play pronunciation
  * Microphone (üé§) - Practice pronunciation with feedback
  * Wrong typing - Automatically adds 2 practice cards on mistakes

DEPENDENCIES:
- External Libraries: None (vanilla JavaScript)
- Fonts: Google Fonts (Cinzel, IM Fell English)
- APIs:
  * Web Speech API (speechSynthesis for TTS)
  * SpeechRecognition API for pronunciation practice
- Module Imports: act1-foundation.js (wordpack data)

INTEGRATION:
- Receives data from: Wordpack modules loaded dynamically
- Sends data to: LocalStorage for preference persistence
- Triggers: User interactions (clicks, keyboard, voice)

ANIMATIONS:
- Card Flip: Soft audio cue with visual flip transition
- Card Remove/Add: No animations - stamps only
  * Show stamp for 1 second, then immediately change to next card
  * No slide-off or insertion effects

STAMPS (REALISTIC DESIGN):
- "Card Removed" (red) and "Extra Practice" (green) overlays
- Realistic stamp styling:
  * Centered on card with -15¬∞ rotation
  * Georgia Bold serif font for classic stamp look
  * Hollow text (transparent fill with 3px stroke outline)
  * Large text (2.5rem) with solid border (4px)
  * Semi-transparent (70% opacity) with multiply blend mode
  * Blends into paper like real rubber stamp
  * Red (#D32F2F) for removed, Green (#388E3C) for added

AUDIO FEATURES:
- Card Flip Sound: Muffled paper-like sound (Cloud Nine Ultra Soft)
- Button Click: Satisfying snap sound (Click Snap J)
- Mechanical Keyboard Sound: Tactile click for each correct letter typed (Writing mode)
- Speech Speed: Adjustable (Slow, Normal, Fast)
- Voice Selection: Multiple Spanish voices available
- Pronunciation Scoring: Real-time feedback with similarity percentage
- Auto-Pronounce: Automatic pronunciation in Listening and Writing modes

VISUAL DESIGN:
- Theme: Old paper/parchment aesthetic with cardboard buttons
- Textures: Procedural SVG noise for paper and cardboard
- Card Weathering (Front):
  * Stronger sun-faded edges (15-25% fade depth)
  * Overall color variations with subtle splotches across entire card
  * Random positions and intensities for natural aging effect
  * Dashed border inset for torn paper effect
- Card Back Design:
  * Pale background with subtle color variations
  * Criss-crossing grid pattern (20px spacing, subtle brown)
  * Different visual pattern to distinguish from front
  * Subconsciously pleasing rustic paper feel

CORRECTIONS & CLARIFICATIONS:
- 2025-11-23: Replaced modals with starting card navigation
  * Menu button (‚ò∞) now shows starting card front (settings: wordpack, language, speed)
  * Help button (?) now shows starting card back (shortened quick help guide)
  * Starting card acts like a regular flashcard - can flip between menu (front) and help (back)
  * "Back to Cards" button returns to saved card position
  * Settings are functional on the starting card and sync with main settings
  * Help text shortened to fit on card without scrolling/cropping
- 2025-11-23: MAJOR MODE REDESIGN - Completely changed listening and writing mode behavior
  * Listening mode: Changed from "show ?, flip to see Spanish | English" to "hear Spanish, type it, flip to see Spanish | English"
  * Writing mode: Changed from "type Spanish on front, see English on back" to "see English on front, type Spanish, see Spanish on back"
  * Both typing modes now have mechanical keyboard sounds and auto-advance on completion
  * Added wrong answer penalty: typing modes automatically add 2 duplicate cards when user makes mistakes
- 2025-11-23: Font and styling updates
  * Reduced card-word and typing-display font sizes from 6.4rem/5.5rem to 4rem for better fit
  * Changed word-break behavior to never break mid-word (word-break: normal, hyphens: none)
  * Made backside whiter (#FFFEF9 to #EAE7E2) with reduced edge weathering (opacity: 0.3) for distinction from front
  * Swapped stamp colors: remove card = green (good), add card = red (bad)
- 2025-11-23: Fixed critical typing mechanic bug - updateDisplay() was resetting progress on every keystroke
  * Root cause: initializeTypingDisplay() being called in updateDisplay() for writing mode
  * Solution: Only initialize typing display when switching modes or navigating to new cards
  * Added initialization calls in switchMode(), goToNext(), goToPrevious(), moveToNextCard()
- 2025-11-23: Fixed font size issues - reading/listening modes had wrong CSS class
  * Changed className from 'word' to 'card-word' to preserve 6.4rem font size
  * Increased typing display from 4rem to 5.5rem for better readability
- 2025-11-23: Fixed listening mode divider styling
  * Changed from 80% width to 95% (wider)
  * Changed from 2px to 1px height (thinner)
  * Added margin: 20px auto for proper centering

NOTES:
- Audio code has important comments about preservation - DO NOT DELETE sound generation code
- State persistence only saves preferences (voice, speed), not deck progress
- Card removal and addition have stamp overlays with 1-second display before animation
- Future LLMs: Read this documentation before making changes to understand the system
===
